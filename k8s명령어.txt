Kubectl 명령어 

client / server 버전 확인
kubectl version

client 버전 확인
kubectl version --client

minikube 설치 디렉토리
C:\Program Files\Kubernetes\Minikube

Docker 드라이버로 minikube 시작
minikube start --driver=docker

현재 드라이버 확인
minikube config get driver

minikube 종료
minikube stop


kubectl run boot-kube --image bmsvega2k/boot-kube:0.1
kubectl get pod
kubectl logs boot-kube

docker build -t vega2k8s/springbootnextjs:0.1 .

Google Cloud CLI 명령어

gcloud version

gke-gcloud-auth-plugin --version

gcloud container clusters get-credentials boot-react-cluster --zone us-central1-a --project shining-axon-474805-r9

kubectl get node

kubectl config view

# git bash 에서만 가능
kubectl describe nodes | grep -A 10 "Allocated resources"

# 리소스 요청량 모니터링:
kubectl top nodes
kubectl top pods

# MariaDB Service 생성하기
kubectl apply -f ./objects/db-mysql-svc.yml

# 객체 확인
kubectl get all

# Orders RESTAPI Deployment 생성하기
kubectl apply -f ./objects/app-boot-deployment.yml

# Orders RESTAPI Service(NodePort타입) 생성하기
kubectl apply -f ./objects/app-boot-svc-nodeport.yml

# service 확인
kubectl get svc

# Service 접근을 위한 EXTERNAL-IP 확인하기
kubectl get nodes -o wide

# Orders API url
http://34.71.84.19:30090/orders

# Orders RESTAPI Service(LoadBalancer 타입) 생성하기
kubectl apply -f ./objects/app-boot-svc-loadbal.yml

# service 확인 하면 LoadBalancer 타입인 서비스의 IP가 보여짐
kubectl get svc

# Orders API url
http://104.155.143.82:8080/orders

# ConfigMap 오브젝트 생성하기
kubectl apply -f ./objects/mysql-configMap.yaml

kubectl get cm

# Secrets 오브젝트 생성하기
kubectl apply -f ./objects/mysql-secrets.yaml

kubectl get secret

# 생성된 ConfigMap과 Secrets 객체를 사용하는 DB 디플로이먼트 객체 생성하기
kubectl apply -f ./objects/db-mysql-svc-secret.yml

# 생성된 ConfigMap과 Secrets 객체를 사용하는 REST API 디플로이먼트 객체 생성하기
kubectl apply -f ./objects/app-boot-deployment-secret.yml

# Nginx 파드와 PVC 생성하기
kubectl apply -f ./objects/pvc-demo.yaml
# PVC 확인
kubectl get pvc
# Pod 확인
kubectl get po

# Pod 내부로 들어가기
kubectl exec -it pvc-demo-pod -- sh
# Pod 삭제
kubectl delete pod pvc-demo-pod

# Pod 와 PVC 확인하기
kubectl get po,pvc









NodePort 서비스 요청하기
SpringBoot
http://34.70.247.76:30090/api/bookmarks
http://34.42.73.32:30090/api/bookmarks
http://34.27.221.173:30090/api/bookmarks

LoadBalancer 서비스 Orders API 요청하기
http://34.28.247.244:8080/api/bookmarks

NodePort
Nextjs 
http://34.70.247.76:30080
http://34.42.73.32:30080

LoadBalancer
Nextjs
http://34.42.169.112:3000


kubectl create secret generic pdf-rag-secrets \
  --from-literal=OPENAI_API_KEY="$(gcloud secrets versions access latest --secret=OPENAI_API_KEYS)"

kubectl apply -f ./k8s_python/1-config.yml
kubectl apply -f ./k8s_python/2-deployment.yml
kubectl apply -f ./k8s_python/3-service.yml

kubectl get node

kubectl get secret

kubectl get cm

kubectl get po,deploy,service

kubectl logs pod/pdf-rag-deployment-b79c945bb-6dxgx

http://34.74.76.123:7860